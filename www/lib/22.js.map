{"version":3,"sources":["webpack:///./components/route-body.js","webpack:///./components/route-body.scss","webpack:///./components/route-body.html","webpack:///./components/route-body.scss?76c7"],"names":["RouteBody","template","props","Object","assign","route","type","observer","contentType","String","value","contentTypeError","bodyError","routeObserved","classList","remove","set","requestBody","add","contentTypeOptions","content","push","label","contentTypeObserved","schema","resolveSchema","getValue","required","err","Error","body","payload","define"],"mappings":"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","file":"lib/22.js","sourcesContent":["import { define, Component } from '@xinix/xin';\n\nimport html from './route-body.html';\n\nimport './route-body.scss';\n\nSystem.import('./accordion-menu');\nSystem.import('xin-ui/ui-selectfield');\nSystem.import('@xinix/xin/components/for');\n\nclass RouteBody extends Component {\n  get template () {\n    return html;\n  }\n\n  get props () {\n    return Object.assign({\n      route: {\n        type: Object,\n        observer: 'routeObserved',\n      },\n      contentType: {\n        type: String,\n        value: '',\n        observer: 'contentTypeObserved',\n      },\n      contentTypeError: {\n        type: Object,\n      },\n      bodyError: {\n        type: Object,\n      },\n    }, super.props);\n  }\n\n  routeObserved (route) {\n    this.classList.remove('visible');\n\n    this.set('contentTypeError', null);\n    this.set('bodyError', null);\n\n    if (!route || !route.requestBody) {\n      return;\n    }\n\n    let { requestBody } = route;\n\n    this.classList.add('visible');\n\n    let contentTypeOptions = [];\n    for (let type in requestBody.content) {\n      contentTypeOptions.push({ label: type, value: type });\n    }\n\n    this.set('contentTypeOptions', contentTypeOptions);\n  }\n\n  contentTypeObserved (type) {\n    if (!type) {\n      this.set('schema', null);\n      return;\n    }\n    let content = this.route.requestBody.content[type];\n    let schema = this.route.resolveSchema(content.schema);\n    this.set('schema', schema);\n  }\n\n  getValue () {\n    this.set('contentTypeError', null);\n    this.set('bodyError', null);\n\n    if (!this.route || !this.route.requestBody) {\n      return;\n    }\n\n    if (this.route.requestBody.required) {\n      if (!this.contentType) {\n        let err = new Error('Content type is required');\n        this.set('contentTypeError', err);\n      }\n\n      if (!this.body) {\n        let err = new Error('Body is required');\n        this.set('bodyError', err);\n      }\n\n      let err = this.contentTypeError || this.bodyError;\n      if (err) {\n        throw err;\n      }\n    } else {\n      if (!this.body) {\n        return;\n      }\n    }\n\n    let { body: payload, contentType } = this;\n    return { payload, contentType };\n  }\n}\n\ndefine('route-body', RouteBody);\n\n\n\n// WEBPACK FOOTER //\n// ./components/route-body.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"route-body {\\n  display: none;\\n  margin-bottom: 20px; }\\n  route-body.visible {\\n    display: block; }\\n  route-body .block {\\n    display: flex;\\n    border: 0; }\\n    route-body .block .block__cell {\\n      display: flex;\\n      flex-direction: column;\\n      overflow: auto; }\\n      route-body .block .block__cell h4 {\\n        font-size: 12px; }\\n      route-body .block .block__cell * {\\n        padding: 0;\\n        margin: 0;\\n        box-sizing: border-box; }\\n    route-body .block .block--flex {\\n      flex: 1; }\\n  route-body .scroll {\\n    overflow: auto; }\\n  route-body ui-selectfield.error select {\\n    border-bottom: 1px solid red !important; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/sass-loader/lib/loader.js!./components/route-body.scss\n// module id = 167\n// module chunks = 22","module.exports = \"<h4>Request Body <span class=\\\"route--required\\\" hidden=\\\"[[route.requestBody.required|not]]\\\">required</span></h4>\\n\\n<p>[[route.requestBody.description]]</p>\\n\\n<ui-selectfield label=\\\"Content Type\\\" options=\\\"[[contentTypeOptions]]\\\" value=\\\"{{contentType}}\\\" class.error=\\\"[[contentTypeError]]\\\"></ui-selectfield>\\n\\n<div class=\\\"block\\\">\\n  <value-viewer class=\\\"block__cell block--flex\\\" schema=\\\"[[schema]]\\\" value=\\\"{{body}}\\\" class.error=\\\"[[bodyError]]\\\"></value-viewer>\\n  <schema-viewer class=\\\"block__cell block--flex\\\" schema=\\\"[[schema]]\\\"></schema-viewer>\\n</div>\\n\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-body.html\n// module id = 185\n// module chunks = 22","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-body.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-body.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-body.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-body.scss\n// module id = 225\n// module chunks = 22"],"sourceRoot":""}
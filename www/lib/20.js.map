{"version":3,"sources":["webpack:///./components/route-response.js","webpack:///./components/route-responses.js","webpack:///./components/route-response.scss","webpack:///./components/route-responses.scss","webpack:///./components/route-response.html","webpack:///./components/route-responses.html","webpack:///./components/route-response.scss?0788","webpack:///./components/route-responses.scss?ef81"],"names":["RouteResponse","template","props","Object","assign","route","type","response","observer","contentType","String","value","responseObserved","classList","remove","contentTypeOptions","content","push","label","set","contentTypeObserved","add","schema","resolveSchema","define","RouteResponses","error","routeObserved","responses","result","code","find","opt","querySelectorAll","forEach","el","getContentType","err","Error"],"mappings":"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","file":"lib/20.js","sourcesContent":["import { define, Component } from '@xinix/xin';\n\nimport html from './route-response.html';\n\nimport './route-response.scss';\n\nSystem.import('./accordion-menu');\nSystem.import('xin-ui/ui-selectfield');\nSystem.import('@xinix/xin/components/for');\nSystem.import('./schema-viewer');\nSystem.import('./value-viewer');\n\nclass RouteResponse extends Component {\n  get template () {\n    return html;\n  }\n\n  get props () {\n    return Object.assign({\n      route: {\n        type: Object,\n      },\n      response: {\n        type: Object,\n        observer: 'responseObserved',\n      },\n      contentType: {\n        type: String,\n        value: '',\n        observer: 'contentTypeObserved',\n      },\n    }, super.props);\n  }\n\n  responseObserved (response) {\n    this.classList.remove('visible');\n\n    if (!response) {\n      return;\n    }\n\n    let contentTypeOptions = [];\n    for (let type in response.content) {\n      contentTypeOptions.push({ label: type, value: type });\n    }\n    this.set('contentTypeOptions', contentTypeOptions);\n\n    this.contentTypeObserved(this.contentType);\n\n    this.classList.add('visible');\n  }\n\n  contentTypeObserved (type) {\n    if (!type || !this.response) {\n      this.set('schema', null);\n      return;\n    }\n\n    let content = this.response.content[type];\n    let schema = this.route.resolveSchema(content.schema);\n\n    this.set('schema', schema);\n  }\n}\n\ndefine('route-response', RouteResponse);\n\n\n\n// WEBPACK FOOTER //\n// ./components/route-response.js","import { define, Component } from '@xinix/xin';\n\nimport html from './route-responses.html';\n\nimport './route-responses.scss';\nimport './route-response';\n\nSystem.import('./accordion-menu');\nSystem.import('xin-ui/ui-selectfield');\nSystem.import('@xinix/xin/components/for');\n\nclass RouteResponses extends Component {\n  get template () {\n    return html;\n  }\n\n  get props () {\n    return Object.assign({\n      route: {\n        type: Object,\n        observer: 'routeObserved',\n      },\n      contentType: {\n        type: String,\n        observer: 'contentTypeObserved',\n      },\n      error: {\n        type: Object,\n      },\n    }, super.props);\n  }\n\n  routeObserved (route) {\n    this.classList.remove('visible');\n\n    this.set('error', null);\n\n    if (!route || !route.responses) {\n      return;\n    }\n\n    this.classList.add('visible');\n\n    let { responses } = route;\n\n    let contentTypeOptions = [];\n    let result = [];\n    for (let code in responses) {\n      let response = Object.assign({ code }, responses[code]);\n\n      for (let type in response.content) {\n        if (!contentTypeOptions.find(opt => opt.value === type)) {\n          contentTypeOptions.push({ label: type, value: type });\n        }\n      }\n\n      result.push(response);\n      // if (code === 'default') {\n      //   result.unshift(response);\n      // } else {\n      //   result.push(response);\n      // }\n    }\n\n    this.set('responses', result);\n    this.set('contentTypeOptions', contentTypeOptions);\n  }\n\n  contentTypeObserved (type) {\n    // FIXME workaround non-items data changed\n    this.querySelectorAll('route-response').forEach(el => el.set('contentType', type));\n  }\n\n  getContentType () {\n    if (!this.route || !this.route.responses) {\n      return;\n    }\n\n    if (!this.contentType) {\n      let err = new Error('Content Type must be set');\n      this.set('error', err);\n      throw err;\n    }\n\n    this.set('error', null);\n    return this.contentType;\n  }\n}\n\ndefine('route-responses', RouteResponses);\n\n\n\n// WEBPACK FOOTER //\n// ./components/route-responses.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"route-response {\\n  display: none;\\n  margin-bottom: 20px; }\\n  route-response.visible {\\n    display: block; }\\n  route-response .block {\\n    display: flex;\\n    border: 0; }\\n    route-response .block .block__cell {\\n      display: flex;\\n      flex-direction: column;\\n      overflow: auto; }\\n      route-response .block .block__cell h4 {\\n        font-size: 12px; }\\n      route-response .block .block__cell * {\\n        padding: 0;\\n        margin: 0;\\n        box-sizing: border-box; }\\n    route-response .block .block--flex {\\n      flex: 1; }\\n  route-response .scroll {\\n    overflow: auto; }\\n  route-response .status-code {\\n    color: #fff;\\n    background-color: red;\\n    border: 1px solid red;\\n    font-size: 10px;\\n    border-radius: 4px;\\n    padding: 2px 4px !important; }\\n    route-response .status-code[code=\\\"200\\\"] {\\n      background-color: green;\\n      border: 1px solid green; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/sass-loader/lib/loader.js!./components/route-response.scss\n// module id = 171\n// module chunks = 20","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"route-responses {\\n  display: none;\\n  margin-bottom: 20px; }\\n  route-responses.visible {\\n    display: block; }\\n  route-responses ui-selectfield.error select {\\n    border-bottom: 1px solid red !important; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/css-loader!../~/sass-loader/lib/loader.js!./components/route-responses.scss\n// module id = 172\n// module chunks = 20","module.exports = \"<span class=\\\"status-code\\\" code$=\\\"[[response.code]]\\\">[[response.code]]</span>\\n<p>\\n  [[response.description]]\\n</p>\\n\\n<div class=\\\"block\\\">\\n  <value-viewer class=\\\"block__cell block--flex\\\" auto-generate=\\\"true\\\" readonly=\\\"true\\\" schema=\\\"[[schema]]\\\"></value-viewer>\\n  <schema-viewer class=\\\"block__cell block--flex\\\" auto-generate=\\\"true\\\" readonly=\\\"true\\\" schema=\\\"[[schema]]\\\"></schema-viewer>\\n</div>\\n\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-response.html\n// module id = 189\n// module chunks = 20","module.exports = \"<h4>Responses</h4>\\n\\n<ui-selectfield label=\\\"Content Type\\\" options=\\\"[[contentTypeOptions]]\\\" value=\\\"{{contentType}}\\\" class.error=\\\"[[error]]\\\"></ui-selectfield>\\n\\n<xin-for id=\\\"responseList\\\" items=\\\"[[responses]]\\\" as=\\\"response\\\">\\n  <template>\\n    <route-response route=\\\"[[route]]\\\" content-type=\\\"[[contentType]]\\\" response=\\\"[[response]]\\\"></route-response>\\n  </template>\\n</xin-for>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-responses.html\n// module id = 190\n// module chunks = 20","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-response.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-response.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-response.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-response.scss\n// module id = 229\n// module chunks = 20","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-responses.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-responses.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./route-responses.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/route-responses.scss\n// module id = 230\n// module chunks = 20"],"sourceRoot":""}